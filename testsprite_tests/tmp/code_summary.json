{
  "tech_stack": [
    "JavaScript (Node.js)",
    "Express",
    "MongoDB (Mongoose, MongoMemoryServer)",
    "JWT (jsonwebtoken)",
    "CORS"
  ],
  "features": [
    {
      "name": "Autenticação",
      "description": "Endpoints de login, registro e validação de token (JWT).",
      "files": [
        "backend/app-real.js",
        "backend/middleware/auth-real.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": { "title": "Autenticação", "version": "1.0.0" },
        "servers": [{ "url": "http://localhost:3001" }],
        "components": {
          "securitySchemes": {
            "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
          }
        },
        "paths": {
          "/auth/login": {
            "post": {
              "summary": "Efetua login e retorna JWT",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": { "email": { "type": "string" }, "password": { "type": "string" } },
                      "required": ["email", "password"]
                    }
                  }
                }
              },
              "responses": {
                "200": { "description": "Token gerado" },
                "401": { "description": "Credenciais inválidas" }
              }
            }
          },
          "/auth/register": {
            "post": {
              "summary": "Registra novo usuário",
              "requestBody": {
                "required": true,
                "content": { "application/json": { "schema": { "type": "object" } } }
              },
              "responses": { "201": { "description": "Usuário criado" }, "400": { "description": "Dados inválidos" } }
            }
          },
          "/auth/validate": {
            "get": {
              "summary": "Valida JWT atual",
              "security": [{ "bearerAuth": [] }],
              "responses": { "200": { "description": "Token válido" }, "401": { "description": "Token inválido" } }
            }
          }
        }
      }
    },
    {
      "name": "NFe",
      "description": "Endpoints de emissão, cancelamento, histórico e utilidades simuladas em dev.",
      "files": [
        "backend/app-real.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": { "title": "NFe", "version": "1.0.0" },
        "servers": [{ "url": "http://localhost:3001" }],
        "components": {
          "securitySchemes": {
            "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
          }
        },
        "paths": {
          "/nfe/status": { "get": { "summary": "Status do serviço", "responses": { "200": { "description": "OK" } } } },
          "/nfe/historico": { "get": { "summary": "Lista histórico de NFe", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Lista retornada" } } } },
          "/nfe/emitir": { "post": { "summary": "Emite NFe (simulado sem certificado)", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Emitida" }, "400": { "description": "Falha/Certificado ausente" } } } },
          "/nfe/cancelar/{chave}": { "get": { "summary": "Cancela NFe pela chave", "security": [{ "bearerAuth": [] }], "parameters": [{ "name": "chave", "in": "path", "required": true, "schema": { "type": "string" } }], "responses": { "200": { "description": "Cancelada" } } } },
          "/nfe/cart-correcao/{chave}": { "get": { "summary": "Carta de correção", "security": [{ "bearerAuth": [] }], "parameters": [{ "name": "chave", "in": "path", "required": true, "schema": { "type": "string" } }], "responses": { "200": { "description": "OK" } } } },
          "/nfe/inutilizar": { "get": { "summary": "Inutilizar numeração", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "OK" } } } },
          "/nfe/download/{tipo}/{chave}": { "get": { "summary": "Download XML/DANFE", "security": [{ "bearerAuth": [] }], "parameters": [{ "name": "tipo", "in": "path", "required": true, "schema": { "type": "string", "enum": ["xml", "danfe"] } }, { "name": "chave", "in": "path", "required": true, "schema": { "type": "string" } }], "responses": { "200": { "description": "Arquivo retornado" } } } },
          "/nfe/validar": { "post": { "summary": "Valida dados de NFe", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Validação OK" } } } },
          "/nfe/consultar/{chave}": { "get": { "summary": "Consulta NFe por chave", "security": [{ "bearerAuth": [] }], "parameters": [{ "name": "chave", "in": "path", "required": true, "schema": { "type": "string" } }], "responses": { "200": { "description": "Consulta OK" } } } },
          "/nfe/teste": { "get": { "summary": "Endpoint de teste", "responses": { "200": { "description": "OK" } } } }
        }
      }
    },
    {
      "name": "Admin",
      "description": "Operações administrativas como listagem de usuários e health-check interno.",
      "files": [
        "backend/app-real.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": { "title": "Admin", "version": "1.0.0" },
        "servers": [{ "url": "http://localhost:3001" }],
        "components": {
          "securitySchemes": {
            "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
          }
        },
        "paths": {
          "/admin/usuarios": { "get": { "summary": "Lista usuários", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Lista retornada" } } } },
          "/admin/health": { "get": { "summary": "Métricas detalhadas de sistema", "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "OK" } } } }
        }
      }
    },
    {
      "name": "Sistema",
      "description": "Status geral da aplicação.",
      "files": [
        "backend/app-real.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": { "title": "Sistema", "version": "1.0.0" },
        "servers": [{ "url": "http://localhost:3001" }],
        "paths": {
          "/health": { "get": { "summary": "Health geral", "responses": { "200": { "description": "OK" } } } }
        }
      }
    }
  ]
}