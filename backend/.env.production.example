# Configuração de Produção - Digital Ocean
# Copie este arquivo para .env e configure as variáveis

# ===== AMBIENTE =====
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# ===== BANCO DE DADOS =====
DB_TYPE=mongodb
MONGODB_URI=mongodb://localhost:27017/nfe_production
# Para MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/nfe_production

# ===== SEGURANÇA =====
JWT_SECRET=your-super-secret-jwt-key-here-change-this
ENCRYPTION_KEY=your-32-character-encryption-key-here
CORS_ORIGIN=https://yourdomain.com
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===== SEFAZ =====
SEFAZ_AMBIENTE=producao
SEFAZ_TIMEOUT=30000
SEFAZ_RETRY_ATTEMPTS=3
SEFAZ_RETRY_DELAY=5000

# ===== CERTIFICADOS =====
CERT_UPLOAD_PATH=/opt/nfe-backend/certificados
CERT_MAX_SIZE=5242880
CERT_ALLOWED_TYPES=.p12,.pfx

# ===== LOGS =====
LOG_LEVEL=info
LOG_TO_FILE=true
LOG_DIR=/var/log/nfe-backend
LOG_MAX_SIZE=100m
LOG_MAX_FILES=30d
LOG_DATE_PATTERN=YYYY-MM-DD

# ===== PERFORMANCE =====
ENABLE_CACHE=true
CACHE_TTL=3600
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
RATE_LIMIT_ENABLED=true

# ===== MONITORAMENTO =====
ENABLE_METRICS=true
METRICS_PATH=/metrics
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=60000
HEALTH_LOG_FILE=/var/log/nfe-backend/health.log

# ===== BACKUP =====
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=/var/backups/nfe-backend

# ===== EMAIL =====
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@yourdomain.com

# ===== DIGITAL OCEAN SPACES =====
DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com
DO_SPACES_KEY=your-spaces-access-key
DO_SPACES_SECRET=your-spaces-secret-key
DO_SPACES_BUCKET=your-bucket-name
DO_SPACES_REGION=nyc3

# ===== UPLOADS =====
UPLOAD_DIR=/opt/nfe-backend/uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=.xml,.pdf,.zip

# ===== SESSÃO =====
SESSION_SECRET=your-session-secret-here
SESSION_MAX_AGE=86400000
SESSION_SECURE=true

# ===== WORKERS =====
WORKERS=max
MAX_MEMORY=1G
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ===== DESENVOLVIMENTO (remover em produção) =====
# DEBUG=nfe:*
# SWAGGER_ENABLED=false

# ===== INTEGRAÇÃO EXTERNA =====
# API_EXTERNA_URL=https://api.externa.com
# API_EXTERNA_KEY=your-api-key
# API_EXTERNA_TIMEOUT=10000

# ===== NOTIFICAÇÕES =====
WEBHOOK_URL=https://yourdomain.com/webhook
WEBHOOK_SECRET=your-webhook-secret

# ===== TIMEZONE =====
TZ=America/Sao_Paulo

# ===== SSL/TLS =====
SSL_CERT_PATH=/etc/ssl/certs/nfe-backend.crt
SSL_KEY_PATH=/etc/ssl/private/nfe-backend.key

# ===== PROXY =====
TRUST_PROXY=true
PROXY_TIMEOUT=30000

# ===== RATE LIMITING ESPECÍFICO =====
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=1000
AUTH_RATE_LIMIT_WINDOW=900000
AUTH_RATE_LIMIT_MAX=5

# ===== CACHE REDIS (opcional) =====
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# ===== OBSERVABILIDADE =====
ENABLE_TRACING=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces
SERVICE_NAME=nfe-backend
SERVICE_VERSION=1.0.0